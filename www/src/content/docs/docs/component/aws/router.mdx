---
title: Router
description: Reference doc for the `sst.aws.Router` component.
---

import Segment from '../../../../../../src/components/tsdoc/Segment.astro';
import Section from '../../../../../../src/components/tsdoc/Section.astro';
import NestedTitle from '../../../../../../src/components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../../src/components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `Router` component lets you use a CloudFront distribution to route requests to different
parts of your app.

You can use this the `routes` to route to function URLs, other domains, or any component that has a URL.

#### Minimal example

```ts
new sst.aws.Router("MyRouter", {
  routes: {
    "/*": "some-internal-service.com"
  }
});
```

#### Route to a function URL

```ts
const myFunction = new sst.aws.Function("MyFunction", {
  handler: "src/api.handler",
  url: true,
});

new sst.aws.Router("MyRouter", {
  routes: {
    "/*": myFunction.url
  }
});
```

#### Route all API requests separately

```ts {4}
new sst.aws.Router("MyRouter", {
  routes: {
    "/*": "myapp.com",
    "/api/*": myFunction.url
  }
});
```

#### Add a custom domain

```ts {2}
new sst.aws.Router("MyRouter", {
  domain: "myapp.com",
  routes: {
    "/*": myFunction.url
  }
});
```
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new Router(name, args, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args</code> [<code class="type">RouterArgs</code>](#routerargs)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## Properties

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The URL of the Router.

If the `domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated CloudFront URL.
</Segment>

## Links

The following are accessible through the [Node client](/docs/reference/client/) at runtime.

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code>
</InlineSection>
</Section>
The URL of the Router.

If the `domain` is set, this is the URL with the custom domain.
Otherwise, it's the autogenerated CloudFront URL.
</Segment>

## RouterArgs
### domain?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol"> | </code><code class="primitive">Object</code><code class="symbol">&gt;</code>
</InlineSection>
- <p>[<code class="key">aliases?</code>](#domain-aliases)</p>
- <p>[<code class="key">domainName</code>](#domain-domainname)</p>
- <p>[<code class="key">hostedZone?</code>](#domain-hostedzone)</p>
- <p>[<code class="key">hostedZoneId?</code>](#domain-hostedzoneid)</p>
- <p>[<code class="key">redirects?</code>](#domain-redirects)</p>
</Section>
Set a custom domain for your Router. Supports domains hosted either on
[Route 53](https://aws.amazon.com/route53/) or outside AWS.

:::tip
You can also migrate an externally hosted domain to Amazon Route 53 by
[following this guide](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/MigratingDNS.html).
:::

```js
{
  domain: "domain.com"
}
```

Specify the Route 53 hosted zone and a `www.` version of the custom domain.

```js
{
  domain: {
    domainName: "domain.com",
    hostedZone: "domain.com",
    redirects: ["www.domain.com"]
  }
}
```
</Segment>
<NestedTitle id="domain-aliases" Tag="h4" parent="domain.">aliases?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Alias domains that should be used. Unlike the `redirect` option, this keeps your visitors
on this alias domain.

So if your users visit `app2.domain.com`, they will stay on `app2.domain.com` in their
browser.
```js {4}
{
  domain: {
    domainName: "app1.domain.com",
    aliases: ["app2.domain.com"]
  }
}
```
</Segment>
<NestedTitle id="domain-domainname" Tag="h4" parent="domain.">domainName</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The custom domain you want to use. Supports domains hosted on [Route 53](https://aws.amazon.com/route53/) or outside AWS.

```js
{
  domain: "domain.com"
}
```
</Segment>
<NestedTitle id="domain-hostedzone" Tag="h4" parent="domain.">hostedZone?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** Same as the `domainName`
</InlineSection>
Name of the [Route 53 hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-working-with.html) that contains the `domainName`. You can find the hosted zone name in the Route 53 part of the AWS Console.


Usually your domain name is in a hosted zone with the same name. For example,
`domain.com` might be in a hosted zone also called `domain.com`. So by default, SST will
look for a hosted zone that matches the `domainName`.

There are cases where these might not be the same. For example, if you use a subdomain,
`app.domain.com`, the hosted zone might be `domain.com`. So you'll need to pass in the
hosted zone name.

:::note
If both the `hostedZone` and `hostedZoneId` are set, `hostedZoneId` will take precedence.
:::

```js {4}
{
  domain: {
    domainName: "app.domain.com",
    hostedZone: "domain.com"
  }
}
```
</Segment>
<NestedTitle id="domain-hostedzoneid" Tag="h4" parent="domain.">hostedZoneId?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The 14 letter ID of the [Route 53 hosted zone](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-working-with.html) that contains the `domainName`. You can find the hosted zone ID in the Route 53 part of the AWS Console.

This option is useful for cases where you have multiple hosted zones that have the same
domain.

:::note
If both the `hostedZone` and `hostedZoneId` are set, `hostedZoneId` will take precedence.
:::

```js {4}
{
  domain: {
    domainName: "domain.com",
    hostedZoneId: "Z2FDTNDATAQYW2"
  }
}
```
</Segment>
<NestedTitle id="domain-redirects" Tag="h4" parent="domain.">redirects?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Alternate domains to be used. Visitors to the alternate domains will be redirected to the
main `domainName`.

:::note
Unlike the `aliases` option, this will redirect visitors back to the main `domainName`.
:::

Use this to create a `www.` version of your domain and redirect visitors to the apex domain.
```js {4}
{
  domain: {
    domainName: "domain.com",
    redirects: ["www.domain.com"]
  }
}
```
</Segment>
### routes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
A map of routes to their destinations. The _key_ is the route path and the
_value_ is the destination URL. All routes need to start with `/`.

When router receives a request, the requested path is compared with path patterns
in the order they are listed. The first match determines which URL the
request is routed to.

:::tip[Default Route]
The `/*` route is a default or catch-all route.
:::

 The `/*` route is a _default_ route, meaning that if no routes match, the `/*` route will be used. It does not matter where the `/*` route is listed in the routes object.

:::note
If you don't have a `/*` route, you'll get a 404 error for any requests that don't match a route.
:::

Suppose you have the following three routes.

```js
{
  routes: {
    "/api/*.json": "example1.com",
    "/api/*": "example2.com",
    "/*.xml": "example3.com",
}
```

A request to `/api/sample.xml` will match `/api/*` first and route to it; even though it matches `/*.xml`.

 However for this case, a request to `/api/users` will route to `/api/*` even though it comes after `/*`. This is because the `/*` route is the default route.

```js
{
  routes: {
    "/*": "myapp.com",
    "/api/*": myFunction.url
  }
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">cachePolicy?</code>](#transform-cachepolicy)</p>
</Section>
[Transform](/docs/components#transform) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-cachepolicy" Tag="h4" parent="transform.">cachePolicy?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">CachePolicyArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudfront/cachepolicy/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">CachePolicyArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudfront/cachepolicy/#inputs)<code class="symbol"> => </code>[<code class="type">CachePolicyArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/cloudfront/cachepolicy/#inputs)<code class="symbol"> | </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the Cache Policy that's attached to each CloudFront behavior.

</Segment>
</div>