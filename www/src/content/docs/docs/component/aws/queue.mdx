---
title: Queue
description: Reference for the `sst.aws.Queue` component.
---

import Segment from '../../../../../components/tsdoc/Segment.astro';
import Section from '../../../../../components/tsdoc/Section.astro';
import NestedTitle from '../../../../../components/tsdoc/NestedTitle.astro';
import InlineSection from '../../../../../components/tsdoc/InlineSection.astro';

<div class="tsdoc">

<Section type="about">
The `Queue` component lets you add an [AWS SQS Queue](https://aws.amazon.com/sqs/) to
your app.

#### Minimal example

```ts
new sst.aws.Queue("MyQueue");
```

#### Make it a FIFO queue

```ts {2}
new sst.aws.Queue("MyQueue", {
  fifo: true
});
```
</Section>

---

## Constructor

<Segment>
<Section type="signature">
```ts
new Queue(name, args?, opts?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">name</code> <code class="primitive">string</code></p>
- <p><code class="key">args?</code> [<code class="type">QueueArgs</code>](#queueargs)</p>
- <p><code class="key">opts?</code> [<code class="type">ComponentResourceOptions</code>](https://www.pulumi.com/docs/concepts/options/)</p>
</Section>
</Segment>

## Methods

### subscribe
<Segment>
<Section type="signature">
```ts
subscribe(subscriber, args?)
```
</Section>

<Section type="parameters">
#### Parameters
- <p><code class="key">subscriber</code> <code class="primitive">string</code><code class="symbol"> | </code>[<code class="type">FunctionArgs</code>](/docs/component/aws/function/#functionargs)</p>
The function that'll be notified.
- <p><code class="key">args?</code> [<code class="type">QueueSubscribeArgs</code>](#queuesubscribeargs)</p>
Configure the subscription.
</Section>

<InlineSection>
**Returns** [<code class="type">Queue</code>](/docs/component/aws/queue/)
</InlineSection>
Subscribe to this queue.

```js
myQueue.subscribe("src/subscriber.handler");
```

Add multiple subscribers.

```js
myQueue
  .subscribe("src/subscriber1.handler")
  .subscribe("src/subscriber2.handler");
```

Customize the subscription.

```js
myQueue.subscribe("src/subscriber.handler", {
  batchSize: 5
});
```

Customize the `subscriber` function.

```js
myQueue.subscribe({
  handler: "src/subscriber.handler",
  timeout: "60 seconds"
});
```
</Segment>

## Properties

### arn
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The ARN of the SQS Queue.
</Segment>

### nodes
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">queue</code>](#nodes-queue)</p>
</Section>
The underlying [resources](/docs/components/#nodes) this component creates.
</Segment>
<NestedTitle id="nodes-queue" Tag="h4" parent="nodes.">queue</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">Queue</code>](https://www.pulumi.com/registry/packages/aws/api-docs/sqs/queue/)
</InlineSection>
</Section>
The Amazon SQS Queue.
</Segment>

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Output</code><code class="symbol">&lt;</code><code class="primitive">string</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
The SQS Queue URL.
</Segment>

## Links

The following are accessible through the [Node client](/docs/reference/client/) at runtime.

### url
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">string</code>
</InlineSection>
</Section>
The SQS Queue URL.
</Segment>

## QueueArgs
### fifo?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
FIFO or _first-in-first-out_ queues are designed to guarantee that messages are processed exactly once and in the order that they are sent.

:::caution
Changing a standard queue to a FIFO queue (or the other way around) will cause the queue to be destroyed and recreated.
:::

```js
{
  fifo: true
}
```
</Segment>
### transform?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Object</code>
</InlineSection>
- <p>[<code class="key">queue?</code>](#transform-queue)</p>
</Section>
[Transform](/docs/components#transform/) how this component creates its underlying
resources.

</Segment>
<NestedTitle id="transform-queue" Tag="h4" parent="transform.">queue?</NestedTitle>
<Segment>
<Section type="parameters">
<InlineSection>
**Type** [<code class="type">QueueArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/sqs/queue/#inputs)<code class="symbol"> | </code><code class="symbol">(</code><code class="primitive">args</code><code class="symbol">: </code>[<code class="type">QueueArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/sqs/queue/#inputs)<code class="symbol"> => </code>[<code class="type">QueueArgs</code>](https://www.pulumi.com/registry/packages/aws/api-docs/sqs/queue/#inputs)<code class="symbol"> | </code><code class="primitive">void</code><code class="symbol">)</code>
</InlineSection>
</Section>
Transform the SQS Queue resource.

</Segment>

## QueueSubscribeArgs
### batchSize?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">10</code>
</InlineSection>
The largest number of records that the `subscriber` function will retrieve from your queue a time. The function will then receives an event with all the retrieved records.

Ranges between a maximum of 10 and a minimum of 1.

If `maxBatchingWindow` is configured, this value can go up to 10000.

</Segment>
### filters?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">Record</code><code class="symbol">&lt;</code><code class="primitive">string</code>, <code class="primitive">any</code><code class="symbol">&gt;</code><code class="symbol">&gt;</code><code class="symbol">[]</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>
Filter the records processed by the `subscriber` function.

:::tip
Learn more about the [filter rule syntax](https://docs.aws.amazon.com/lambda/latest/dg/invocation-eventfiltering.html#filtering-syntax).
:::

For example, if you Queue contains records in this JSON format.
```j
{
  RecordNumber: 0000,
  RequestCode: "AAAA",
  TimeStamp: "yyyy-mm-ddThh:mm:ss"
}
```

To process only those records where the `RequestCode` is `BBBB`.

```js
{
  filters: [
    {
      body: {
        RequestCode: ["BBBB"]
      }
    }
  ]
}
```

And to process only those records where `RecordNumber` greater than `9999`.

```js
{
  filters: [
    {
      body: {
        RecordNumber: [{ numeric: [ ">", 9999 ] }]
      }
    }
  ]
}
```
</Segment>
### maxBatchingWindow?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} second</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} seconds</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minute</code><code class="symbol">&rdquo;</code><code class="symbol"> | </code><code class="symbol">&ldquo;</code><code class="primitive">$\{number\} minutes</code><code class="symbol">&rdquo;</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">"0 seconds"</code>
</InlineSection>
The maximum amount of time to wait and collect records before invoking the `subscriber`.

Ranges between a maximum of 300 seconds and a minimum of 0. Where, 0  means the `subscriber` is called right away.

```js
{
  maxBatchingWindow: "60 seconds"
}
```
</Segment>
### maxConcurrency?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">number</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">1000</code>
</InlineSection>
The maximum number of concurrent instances of the `subscriber` function that are
invoked by the Amazon SQS event.

:::note
The default is set to your account's Lambda concurrency limit. This is 1000 for most accounts.
:::

Ranges between a maximum of 1000 and a minimum of 2.

</Segment>
### reportBatchItemFailures?
<Segment>
<Section type="parameters">
<InlineSection>
**Type** <code class="primitive">Input</code><code class="symbol">&lt;</code><code class="primitive">boolean</code><code class="symbol">&gt;</code>
</InlineSection>
</Section>

<InlineSection>
**Default** <code class="primitive">false</code>
</InlineSection>
Allow the `subscriber` to return partially successful responses for a batch of records.

</Segment>
</div>